```mermaid
flowchart TD

%% ------------------ Sources ------------------
subgraph HospitalSources["Hospital & Middleware Sources"]
  SMRP[SMRP]
  HPU[HPU]
  HAT[HAT]
  Private[Private Hospital]
  MyGDX[MyGDX]
end

subgraph FileSources["SFTP Batch Sources"]
  HospA[Hospital A - Bulk Upload]
  HospB[Hospital B - Bulk Upload]
end

%% ------------------ API Integration ------------------
subgraph APIIntegration["C-4-1 API Integration Layer"]
  F1[JSON/XML Format]
  F2[HTTP Methods GET/POST/PUT/DELETE]
  F3[Auth - OAuth2/JWT/API Key]
  F4[Error Codes 200/400/401/500]
  F5[Rate Limiting]
  F6[Versioning v1/v2]
  F7[Swagger/OpenAPI Docs]
  F8[Secure API Layer]
end

%% ------------------ SFTP Integration ------------------
subgraph SFTPIntegration["C-4-2 SFTP Integration Layer"]
  S1[XML/CSV Bulk Upload]
  S2[Key-based Auth]
  S3[IP Allow-List + Isolated Folder]
  S4[Upload/Download to Storage]
  S5[Audit Logs - 7 Years]
  S6[Retry & Resume - SFTP Only]
  S7[ACK/NAK with Checksum]
  S8[Encryption via SSH]
end

%% ------------------ Codification Integration ------------------
subgraph Codification["C-4-3 Codification Integration Layer"]
  C1[WHO ICD11 API REST]
  C2[ICHI Codes]
  C3[Secure API Layer]
end

%% ------------------ National DRG ------------------
subgraph DRGSystem["National DRG System (Cloud)"]
  M1[Patient Data Mgmt]
  M2[Case-based Costing]
  M3[DRG Grouper]
  M4[EIS & AI Dashboard]
end

%% ------------------ Flows ------------------
HospitalSources --> APIIntegration
FileSources --> SFTPIntegration
APIIntegration --> DRGSystem
SFTPIntegration --> DRGSystem
Codification --> DRGSystem
DRGSystem --> Codification
